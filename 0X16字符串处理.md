# 0X16字符串处理
## 前置知识
* 0X15类型转换
## 正文
1. 说明：
    * 如果不特殊说明，后续的str，str1，str2等等表示字符串。
    * 如果string开头的函数不能使用，先执行require('string')。
2. string.lower(str) 返回一个字符串，是把str中的所有字母都替换成小写字母的结果。
3. string.upper(str) 返回一个字符串，是把str中的所有字符都替换成大写字母的结果。
4. string.reverse(str) 返回str反转（头尾颠倒）后的结果。
5. string.len(str) 返回一个整数，是str的长度。注意一个转移字符的组合算一个字符，例如'123\x4567'一共6个字符。
6. 然后拓展一下有关字符串字面值的内容（字面值是指一些源码中的字符组合用以表示特定的值，而非变量名或者语法关键词）。
    * 如果想在字符串中出现单引号本身就要用到转移字符。\'表示一个单引号（显示出来就是一个'）。
    * 如果要出现转义符反斜杠本身，也需要转换。字符串中\\表示一个反斜杠（显示\），\\\\表示两个反斜杠（显示\\）。
    * 双引号可以替代单引号作为字符串边界。
        + 如果用单引号表示边界，则字符串中可以直接出现双引号。
        + 如果双引号为边界，则可以直接出现单引号。
        + 如果双引号为边界，则字符串中出现双引号也需要转义，写为\"。        
7. 转移字符后也可接一个0到127的十进制整数（含0和127）。然后显示为对应十进制ASCII码的字符。也可以用等价的十六进制数，但是记得以x开头（与十六进制数字字面值不同）。例如：
    >```
    >print('\33\x31\65\x42')
    >```
    输出结果为
    >```
    >!1AB
    >```
    注意如果用十进制数转义，转义符会结合其后最多三位十进制数。也就是说"\12345"显示为“{45”。
8. 一些常用的特殊符号有专用的转移字符：
    * \a bell
    * \b backspace
    * \f form feed
    * \n new line(LF)
    * \r carriage return(CR)
    * \t horizontal tab
    * \v vertical tab
    * 除了用\n或\r换行。还可以直接在\后接回车实现字符串字面值内有换行符。例如：
        >```
        >str='This is \
        >another line.'
        >```
9. 特殊转义符组合\z有特殊用途。它不往字面值中增加任何字符，反而会阻止其后空白符称为字面值表示的字符串的一部分。其作用范围是从其后到第一个非空白符。
    >```
    >str='Hello\z          My  World'
    >``
    str存储的实际内容是“HelloMy World”（不包括引号）。
    另外“空白符”，一般指空格、换行、tab。
10. Lua还允许方括号的组合用作字符串边界。它们会把所有换行也包括在字符串中。例如:
    >```
    >str1=[[hello'
    >this
    >is my world]]
    >
    >str2=[==[This"" is
    > another 
    >line]==]
    >```
    个人不推荐使用这些语法。最好还是使用清晰的专用转移字符\n或\r表示换行。
11. 对于ASCII字符集中有的字符，在计算机内一般按ASCII码存储。但是其他的一些Unicode字符就不一定了。函数string.byte(str)会返回str第一个字符的交换码值（整数）。（直接输出的话是十进制形式。）
    * 对于ASCII字符来说就是ASCII码值。对于其他字符来说就说不定了，而且Lua标准里不要求这个函数在不同平台输出的结果一致。
    * 这个函数可以加可选参数。string.byte(str,i)会返回str的第i个字符的交换码。（从1开始数。）
    * string.byte(str,i,j) 返回多个值，是从第i个到第j个字符的交换码。（包括第i个，第j个。）
12. string.char是string.byte的逆向操作。它接收任意个整数参数，把接受到的参数转化为对应的字符。然后按顺序把字符组成一个字符串返回。注意：
    >```
    >str1='helloworld'
    >str2=string.char(string.byte(str1,1,10))
    >```
    虽然绕了个弯子，但是str2==str1成立。
## 后续推荐
* 0X1A格式字符串
## 闲谈
讲道理地说，这一章题目和内容有点距离。转义字符的东西占了很多篇幅。但是不说又觉得有缺憾。改标题吧又来不及了（0X15中已经预告过这一期的题目）。再加上bilibili目前不支持已投稿件的修改。就用这个比较文不对题的标题吧。