# Comma Separated Values Format

首先考虑一个小问题——“表格”一词表示什么意思？

我认为通常被我们称为“表格”的东西，实际上包含了两种具有不同目的的东西。第一种是我们论文中，杂志上常见的“图表”中的“表”。这种表格的作用主要是向读者展示数据。因而这种表是面向人的，你除了要保证表格内容正确，还应当保证表格对于人来说是易读的，甚至美观的。这种表和流程示意图是同一类东西。可以说这种表是“面向人”的。

第二种是我们在做数据处理时，用作数据结构的“表格”。这种表格不是直接拿来给人看的，而是用于存储和处理大量同构数据的。对于这种表格来说，严谨的格式定义要比它看起来怎么样重要得多。这种表和数据结构中的树是同一类东西。可以说这种表是“面向算法”的。

这两种表当然是可以相互转化的。你可以根据数据库中的表示生成展示性的表格，也可以把展示性表格中的数据提取出来存储到数据库中。不过对于今天我们要讨论的话题来说，把两种表的区别厘清还是很有必要的。

今天要介绍的CSV文件格式，属于上边所说的第二类表格。也就是说它是用于数据处理中的表格，而非展示性的表格。你不会想用它在论文中展示实验结果或者在工作汇报中展示本周业绩。

更准确地说，CSV文件格式是专注于数据工作中，存储数据这个环节的一种格式（也就是说读入内存进行运算时，表格不再是CSV格式）。而且是存储同构数据的格式（异构数据考虑用JSON之类的格式存储）。

> CSV是数据处理中的表格，而非展示性的表格。但是这并不意味着人看不懂CSV文件。只是相比起各种PPT上那种能让人一眼Get到关键信息的表格来说，CSV原本的显示方式不是很容易读，而且没有刻意突出表中的某些信息。

弄清楚CSV的定位，很多莫名其妙的问题自然就有了答案。例如：

问：CSV和JSON有什么优劣？

答：一个存同构，一个存异构，怎么比较？

问：CSV和数据库比有什么优劣？

答：CSV只关注表格数据存储这一个环节。而数据库是一个把数据从生管到死的完整系统。CSV可以作为数据库方案的一部分，但是并不是所有数据库方案都采用CSV作为其一部分。因此二者根本不是同级别同类型的对象，无法比较。

问：CSV和Excel比哪个好？

答：Excel能编辑CSV你信么？Excel是一个编辑表格的软件，CSV是一个文件格式。根本无从比较。能比较的应该是MS Office Excel默认保存的Office Open XML Workbook文件格式（后缀为`xlsx`）和CSV文件格式。

## 逗号分隔值格式

CSV全称Comma Separated Values，字面直译“逗号分隔值”。所以“CSV文件”完全用汉字写就是“逗号分隔值文件”。而“CSV Format”就应该翻译为“逗号分隔值格式”。

这种文件格式的出发点十分朴素——普通的纯文本只有“行”而没有“列”，CSV约定用逗号（注意是英文逗号）表示列间隔，这样有“行”有“列”就能表示表格了。

所以一个简单的表格应该是这样：

```csv
太玄,Up主,咕咕咕
一天世界君,Up主,咕咕咕
酒石酸,Up主,更新中
斗地主之王,观众,吃瓜
```

是不是看起来缺点什么？没错缺个表头来说明每一列数据的含义。CSV为此并没有约定特别的语法，如果你想加个表头，把第一行当作表头写就行了（记住这个坑爹设定）。

加上表头之后就是：

```csv
名称,身份,状态
太玄,Up主,咕咕咕
一天世界君,Up主,咕咕咕
酒石酸,Up主,更新中
斗地主之王,观众,吃瓜
```

现在再考虑一个问题，如果我某一单元格的值中正好包含英文逗号本身该怎么办？

聪明的你一定想到了转义字符。在CSV中约定了一种

现在一切看起来都挺好，但是实际上这个简单的文件格式隐藏了巨大的混乱。

## 某分隔值格式





CSV中没有预设数据类型

听起来是不是很简单。但是



这种文件就是在普通

最初这种文件

式是一种用于存储表格数据的

