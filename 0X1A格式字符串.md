# 0X1A格式字符串
## 前置知识
* 0X16字符串处理
## 正文
1. 有时候我们需要生成格式化的字符串，根据变量的值转化出格式化的字符串。例如表示日期和时间的"2017.09.10(Sun) 20:34:02",表示金额的"$32.34"。
2. string.format函数的格式字符串的语法规则和C语言的sprintf等函数大致相同（有一些格式不支持，详见Lua官方文档）。
3. 这里简单介绍一些用法，更多的详见C语言的参考文档。
4. 通过string.format函数可以生成指定格式的字符串。
    * 它接收的第一个参数是一个字符串，称为格式字符串，后文中假设其变量名为fstr。
    * 除了格式字符串，这个函数还能接受任意个参数。这些参数将按照格式字符串中占位符的规定，替换到指定位置，生成格式化的字符串。
    * 生成格式化的字符串后，函数把它作为返回值返回。
5. 关于格式字符串fstr
    * fstr中除了占位符以外的字符会被原样保留到返回的字符串中。
    * fstr中的符号%和百分号后一系列符合语法规定的符号组成占位符（或格式说明符）。
    * 所有的占位符会被后续参数转化成的字符串替换。
6. 如果出现两个连续的%，则表示一个单独的%。（原理类似\做转义符。）
7. %i占位会被一个整数替代（%d的效果一样）。例如
    >```
    >x=6
    >string.format('This is number %i.',x)
    >```
    结果是“This is number 6.”。
8. 如果有多个占位符，则应当在格式字符串后应该有等量的变量。按顺序，对应替换。例如:
    >```
    >y=2017
    >m=9
    >d=10
    >string.format('year:%i month:%i day:%i',y,m,d)
    >```
9. 演示：格式字符串 `<>!!!!!!!!!!!!!!!!!!!!!!!演示生成一个年月日时间的`
10. 如果无心搞命令行上的界面，看到这里之后，跳到本文最后看一下字符，字符串，浮点数的占位符是什么就行了。
11. 尝试显示一个数字表格：
    >```
    >string.format('%i %i %i\n%i %i %i',2345,6,42,65,224,1)
    >```
    每行对不齐，不太好看（用\t来解决，解决不彻底而且比较繁琐）。这时可以规定替换来的每个数的位数。如果位数小于这个规定值，就会用空格补全。
    写法是把规定的位数写在%之后i之前。例如规定每个数字5位：
    >```
    >string.format('%5i %5i %5i\n%5i %5i %5i',2345,6,42,65,224,1)
    >```
12. 默认数字右对齐,可以在%之后，数字之前加负号。表示格式上左对齐。例如这里让第二行左对齐：
    >```
    >string.format('%5i %5i %5i\n%-5i %-5i %-5i',2345,6,42,65,224,1)
    >```
13. 如果替换的整数参数是负数，输出时会带符号。
    >```
    >string.format('%5i %5i %5i\n%5i %5i %5i',2345,-6,42,-65,224,1)
    >```
    如果希望负数显示符号，正数也显示正号，就在格式字符串的占位符中%后，数字前增加符号+。
    >```
    >string.format('%+5i %+5i %+5i\n%+5i %+5i %+5i',2345,-6,42,-65,224,1)
    >```
14. 还可以在i和%之间加空格。这样，如果替代占位符的数字没有正负号要现实，就会往前边加个空格。第二行不加空格做对比。
    >```
    >string.format('% i% i% i\n%i%i%i',2345,-6,42,-65,224,1)
    >```
15. 对于规定了位数的情况（仅限右对齐），如果希望用0占位，则在表示位数的数字之前写0。
    >```
    >string.format('%05i %05i %05i\n%+5i %+5i %+5i',2345,-6,42,-65,224,1)
    >```
16. 如果希望用小数的形式输出数字（哪怕你给予的替换参数也是个整数），就使用占位符%f替代%i。（%F也可以。）
    >```
    >string.format('%f %f %f\n%f %f %f',2345,6,42,65,224,1)
    >```
17. %f和%F中间也可以加一个浮点数表示对位数的规定。
    * 这个数的整数部分表示浮点数总体应该多少位（包括小数点和小数位）
    * 小数点后的数表示应该保留多少位
    * 例如%07.3f表示把一个数按浮点形式显示。总体应该为7位（算上小数点）。小数最多3位。不够的位数用0在左侧补齐。
    * 上例中如果整数已经超过7位，不会截断整数部分。
18. 要把一个数按科学计数法显示就用%e或%E。%g或%G则依据精确值自动选择输出形式。
    >```
    >string.format('%e %e %e\n%a %a %a',2345,6,42,65,224,1)
    >```
19. %u会把对应位置的参数当作无符号整数输出。所以如果正好对应一个绝对值较小的负数，可能会输出一个特别大的数。
20. 其他进制：
    * %o让数字以八进制输出。
    * %x或%X以十六进制输出。
    * 在%后，x或o之前加#可以切换可选格式。这个格式下八进制数前会加0，十六进制数前会加0x。
    * 十六进制科学计数法用%a或%A。
21. %c会把对应的变量按ASCII码值映射为字符输出。例如
    >```
    >string.format('%c',89)
    >```
    输出结果是字符Y。
22. 如果希望一个字符串来替代占位符，则使用%s或%q。如果用%q，则字符串替换时会带上双引号。例如：
    >```
    >string.format('%s %q','hello','world')
    >```
## 后续推荐
* 0X1B正则表达式