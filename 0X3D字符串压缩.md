# 0X3D字符串压缩

## 前置知识

* 0X32模块搜寻

## 正文

### 压缩目的

字符串压缩虽然返回值是字符串,但是却不是以ASCII的格式写入的字符串.它是Lua提供的又一种操作底层数据(字节层面)的方法.

### 压缩字符串

string.pack的第一个参数叫fmt,它的作用类似于正则表达式中的模式用于指定压缩格式.在fmt之后可以接受任意个参数,这些参数称为值.这个函数的作用就是依据fmt的格式把后边的值压缩到一个字符串中.例如:

>```lua
>str=string.pack('Jdb',120,120,120)
>print(str)
>```

输出的字符串是不认识的乱码很正常.因为这里的pack生成的数据虽然是以字符串形式返回.但是,却不是按照ASCII编码压缩的.例如fmt中的第一个字母J会被第一个参数120取代.而J代表把取代它的数按无符号整数类型格式写入字节.

这里说明一下,fmt中的字母会被后续的一个值替换,替换后,值要按照fmt中字母表示的格式进行转换,然后写入字节.


## 后续推荐


string.pack (fmt, v1, v2, ···)

Returns a binary string containing the values v1, v2, etc. packed (that is, serialized in binary form) according to the format string fmt (see §6.4.2).

string.packsize (fmt)

Returns the size of a string resulting from string.pack with the given format. The format string cannot have the variable-length options 's' or 'z' (see §6.4.2).

string.unpack (fmt, s [, pos])

Returns the values packed in string s (see string.pack) according to the format string fmt (see §6.4.2). An optional pos marks where to start reading in s (default is 1). After the read values, this function also returns the index of the first unread byte in s.

