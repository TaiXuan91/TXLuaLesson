<!doctype html><html><head><meta charset='utf-8'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.4.1/github-markdown.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.css">
<link rel="stylesheet" href="https://gitcdn.xyz/repo/goessner/mdmath/master/css/texmath.css">
<link rel="stylesheet" href="https://gitcdn.xyz/repo/goessner/mdmath/master/css/vscode-texmath.css">

</head><body class="markdown-body">
<h1>0X2F函数和表</h1>
<h2>前置知识</h2>
<ul>
<li>0X23计数工具</li>
<li>0X2E更多对表操作</li>
</ul>
<h2>正文</h2>
<ol>
<li>Lua的函数可以接受任意个参数.只要在函数定义时使用...
<ul>
<li>...视为一个序列(多个变量或者值用逗号隔开,但是不是列表).可以用于批量赋值或者给别的函数传递参数.</li>
<li>如果想把...的内容整合为一个列表,则在函数体内给...套上花括号.</li>
</ul>
<blockquote>
<pre><code class="language-lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fun</span><span class="hljs-params">(...)</span></span>
   a,b,c=...
   <span class="hljs-built_in">print</span>(<span class="hljs-string">'tag1'</span>)
   <span class="hljs-built_in">print</span>(a,b,c)
   <span class="hljs-built_in">print</span>(<span class="hljs-string">'tag2'</span>)
   <span class="hljs-built_in">print</span>(...)
   list={...}
   <span class="hljs-built_in">print</span>(<span class="hljs-string">'tag3'</span>)
   <span class="hljs-built_in">print</span>(list)
<span class="hljs-keyword">end</span>
fun(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)
</code></pre>
</blockquote>
</li>
<li>如果你已经了解过脚本相关的内容,请注意.在脚本中...也有一个全局变量版本.它表示调用Lua脚本时命令行的额外参数.例如在脚本文件h.lua中写入:
<blockquote>
<pre><code class="language-lua"><span class="hljs-built_in">print</span>(...)
</code></pre>
</blockquote>
然后在命令行中这样调用
<blockquote>
<pre><code class="language-bash">lua h.lua hello world! This is a sentence.
</code></pre>
</blockquote>
这就相当于C语言中main函数的参数.</li>
<li>表达式...可以和一般的参数列表混合使用.但是...一定要放在最后.例如:
<blockquote>
<pre><code class="language-lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span><span class="hljs-params">(a,b,...)</span></span>
   <span class="hljs-built_in">print</span>(a+b)
   <span class="hljs-built_in">print</span>(...)
<span class="hljs-keyword">end</span>
f(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>)
</code></pre>
</blockquote>
</li>
<li>在Lua中,所谓的全局变量是指一个名为_G的表的成员.
<ul>
<li>变量名就是成员索引,变量值就是成员的值.
<blockquote>
<pre><code class="language-lua"><span class="hljs-built_in">_G</span>.x=<span class="hljs-string">'hello'</span>
<span class="hljs-built_in">print</span>(x)
</code></pre>
</blockquote>
</li>
<li>_G虽然不是关键字,但是也应当避免自定义变量使用这个变量名以防止出现错误.</li>
<li><code>_G</code>有一个索引为<code>_G</code>的成员就是它自己.</li>
<li><code>_ENV</code>也是一张表.暂时可以认为它和<code>_G</code>一样.</li>
</ul>
</li>
<li>顺便再介绍一个预定义的变量_VERSION.这个变量的内容是当前Lua虚拟机的版本号.</li>
</ol>
<h2>后续推荐</h2>
<ul>
<li>0X30模块调用</li>
</ul>

</body></html>